# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

* [`openvpn`](#openvpn): This module installs the openvpn service, configures vpn endpoints, generates client certificates, and generates client config files
* [`openvpn::config`](#openvpnconfig): This class sets up the openvpn enviornment as well as the default config file
* [`openvpn::install`](#openvpninstall): This module installs the openvpn service, configures vpn endpoints, generates client certificates, and generates client config files
* [`openvpn::service`](#openvpnservice): This class maintains the openvpn service.

### Defined types

* [`openvpn::ca`](#openvpnca): This define creates the openvpn ca and ssl certificates
* [`openvpn::client`](#openvpnclient): This define creates client certs for a specified server as well as a tarball that can be directly imported into clients
* [`openvpn::client_specific_config`](#openvpnclient_specific_config): This feature is explained here: http://openvpn.net/index.php/open-source/documentation/howto.html#policy All the parameters are explained in 
* [`openvpn::revoke`](#openvpnrevoke): This define creates a revocation on a certificate for a specified server.
* [`openvpn::server`](#openvpnserver): This define creates the openvpn server instance which can run in server or client mode.

## Classes

### <a name="openvpn"></a>`openvpn`

This module installs the openvpn service, configures vpn endpoints, generates client certificates, and generates client config files

#### Examples

##### 

```puppet
class { 'openvpn':
  autostart_all => true,
}
```

#### Parameters

The following parameters are available in the `openvpn` class:

* [`autostart_all`](#autostart_all)
* [`manage_service`](#manage_service)
* [`etc_directory`](#etc_directory)
* [`group`](#group)
* [`link_openssl_cnf`](#link_openssl_cnf)
* [`pam_module_path`](#pam_module_path)
* [`namespecific_rclink`](#namespecific_rclink)
* [`default_easyrsa_ver`](#default_easyrsa_ver)
* [`easyrsa_source`](#easyrsa_source)
* [`additional_packages`](#additional_packages)
* [`ldap_auth_plugin_location`](#ldap_auth_plugin_location)
* [`client_defaults`](#client_defaults)
* [`clients`](#clients)
* [`client_specific_config_defaults`](#client_specific_config_defaults)
* [`client_specific_configs`](#client_specific_configs)
* [`revoke_defaults`](#revoke_defaults)
* [`revokes`](#revokes)
* [`server_defaults`](#server_defaults)
* [`servers`](#servers)
* [`server_directory`](#server_directory)
* [`server_service_name`](#server_service_name)

##### <a name="autostart_all"></a>`autostart_all`

Data type: `Boolean`

Whether openvpn instances should be started automatically on boot.

##### <a name="manage_service"></a>`manage_service`

Data type: `Boolean`

Whether the openvpn service should be managed by puppet.

##### <a name="etc_directory"></a>`etc_directory`

Data type: `Stdlib::Absolutepath`

Path of the configuration directory.

##### <a name="group"></a>`group`

Data type: `String[1]`

File group of the generated config files.

##### <a name="link_openssl_cnf"></a>`link_openssl_cnf`

Data type: `Boolean`

Link easy-rsa/openssl.cnf to easy-rsa/openssl-1.0.0.cnf

##### <a name="pam_module_path"></a>`pam_module_path`

Data type: `Optional[Stdlib::Absolutepath]`

Path to openvpn-auth-pam.so

##### <a name="namespecific_rclink"></a>`namespecific_rclink`

Data type: `Boolean`

Enable namespecific rclink's (BSD-style)

##### <a name="default_easyrsa_ver"></a>`default_easyrsa_ver`

Data type: `Pattern[/^[23]\.0$/]`

Expected version of easyrsa.

##### <a name="easyrsa_source"></a>`easyrsa_source`

Data type: `Stdlib::Unixpath`

Location of easyrsa.

##### <a name="additional_packages"></a>`additional_packages`

Data type: `Variant[String[1], Array[String[1]]]`

Additional packages

##### <a name="ldap_auth_plugin_location"></a>`ldap_auth_plugin_location`

Data type: `Optional[Stdlib::Absolutepath]`

Path to the ldap auth pam module

##### <a name="client_defaults"></a>`client_defaults`

Data type: `Hash`

Hash of defaults for clients passed to openvpn::client defined type.

Default value: `{}`

##### <a name="clients"></a>`clients`

Data type: `Hash`

Hash of clients passed to openvpn::client defined type.

Default value: `{}`

##### <a name="client_specific_config_defaults"></a>`client_specific_config_defaults`

Data type: `Hash`

Hash of defaults for client specific configurations passed to openvpn::client_specific_config defined type.

Default value: `{}`

##### <a name="client_specific_configs"></a>`client_specific_configs`

Data type: `Hash`

Hash of client specific configurations passed to openvpn::client_specific_config defined type.

Default value: `{}`

##### <a name="revoke_defaults"></a>`revoke_defaults`

Data type: `Hash`

Hash of defaults for revokes passed to openvpn::revoke defined type.

Default value: `{}`

##### <a name="revokes"></a>`revokes`

Data type: `Hash`

Hash of revokes passed to openvpn::revoke defined type.

Default value: `{}`

##### <a name="server_defaults"></a>`server_defaults`

Data type: `Hash`

Hash of defaults for servers passed to openvpn::server defined type.

Default value: `{}`

##### <a name="servers"></a>`servers`

Data type: `Hash`

Hash of servers passed to openvpn::server defined type.

Default value: `{}`

##### <a name="server_directory"></a>`server_directory`

Data type: `Optional[Stdlib::Absolutepath]`

Path of the server configuration. This is usually `/etc_directory/openvpn`, but RHEL/CentOS 8 uses `/etc_directory/openvpn/server`

##### <a name="server_service_name"></a>`server_service_name`

Data type: `String[1]`

Name of the openvpn server service. This is usually `openvpn`, but RHEL/CentOS 8 uses `openvpn-server`.

### <a name="openvpnconfig"></a>`openvpn::config`

This class sets up the openvpn enviornment as well as the default config file

### <a name="openvpninstall"></a>`openvpn::install`

This module installs the openvpn service, configures vpn endpoints, generates client certificates, and generates client config files

### <a name="openvpnservice"></a>`openvpn::service`

This class maintains the openvpn service.

## Defined types

### <a name="openvpnca"></a>`openvpn::ca`

This define creates the openvpn ca and ssl certificates

#### Examples

##### 

```puppet
openvpn::ca {
  'my_user':
    server      => 'contractors',
    remote_host => 'vpn.mycompany.com'
 }
```

#### Parameters

The following parameters are available in the `openvpn::ca` defined type:

* [`dn_mode`](#dn_mode)
* [`country`](#country)
* [`province`](#province)
* [`city`](#city)
* [`organization`](#organization)
* [`email`](#email)
* [`common_name`](#common_name)
* [`group`](#group)
* [`ssl_key_algo`](#ssl_key_algo)
* [`ssl_key_size`](#ssl_key_size)
* [`ssl_key_curve`](#ssl_key_curve)
* [`key_expire`](#key_expire)
* [`ca_expire`](#ca_expire)
* [`digest`](#digest)
* [`key_name`](#key_name)
* [`key_ou`](#key_ou)
* [`key_cn`](#key_cn)
* [`tls_auth`](#tls_auth)
* [`tls_static_key`](#tls_static_key)
* [`crl_days`](#crl_days)

##### <a name="dn_mode"></a>`dn_mode`

Data type: `Enum['org','cn_only']`

EasyRSA X509 DN mode.

Default value: `'org'`

##### <a name="country"></a>`country`

Data type: `Optional[String]`

Country to be used for the SSL certificate

Default value: ``undef``

##### <a name="province"></a>`province`

Data type: `Optional[String]`

Province to be used for the SSL certificate

Default value: ``undef``

##### <a name="city"></a>`city`

Data type: `Optional[String]`

City to be used for the SSL certificate

Default value: ``undef``

##### <a name="organization"></a>`organization`

Data type: `Optional[String]`

Organization to be used for the SSL certificate

Default value: ``undef``

##### <a name="email"></a>`email`

Data type: `Optional[String]`

Email address to be used for the SSL certificate

Default value: ``undef``

##### <a name="common_name"></a>`common_name`

Data type: `String`

Common name to be used for the SSL certificate

Default value: `'server'`

##### <a name="group"></a>`group`

Data type: `Optional[String]`

User to drop privileges to after startup

Default value: ``undef``

##### <a name="ssl_key_algo"></a>`ssl_key_algo`

Data type: `Enum['rsa', 'ec', 'ed']`

SSL Key Algo. ec can enable elliptic curve support. ed uses ed25519 keys

Default value: `'rsa'`

##### <a name="ssl_key_size"></a>`ssl_key_size`

Data type: `Integer`

Length of SSL keys (in bits) generated by this module, used if ssl_key_algo is rsa

Default value: `2048`

##### <a name="ssl_key_curve"></a>`ssl_key_curve`

Data type: `String`

Define the named curve for the ssl keys, used if ssl_key_algo is ec, ed

Default value: `'secp384r1'`

##### <a name="key_expire"></a>`key_expire`

Data type: `Integer`

The number of days to certify the server certificate for

Default value: `3650`

##### <a name="ca_expire"></a>`ca_expire`

Data type: `Integer`

The number of days to certify the CA certificate for

Default value: `3650`

##### <a name="digest"></a>`digest`

Data type: `Enum['md5','sha1','sha256','sha224','sha384','sha512']`

Cryptographic digest to use

Default value: `'sha512'`

##### <a name="key_name"></a>`key_name`

Data type: `Optional[String]`

Value for name_default variable in openssl.cnf and KEY_NAME in vars

Default value: ``undef``

##### <a name="key_ou"></a>`key_ou`

Data type: `Optional[String]`

Value for organizationalUnitName_default variable in openssl.cnf and KEY_OU in vars

Default value: ``undef``

##### <a name="key_cn"></a>`key_cn`

Data type: `Optional[String]`

Value for commonName_default variable in openssl.cnf and KEY_CN in vars

Default value: ``undef``

##### <a name="tls_auth"></a>`tls_auth`

Data type: `Boolean`

Determins if a tls key is generated

Default value: ``false``

##### <a name="tls_static_key"></a>`tls_static_key`

Data type: `Boolean`

Determins if a tls key is generated

Default value: ``false``

##### <a name="crl_days"></a>`crl_days`

Data type: `Integer`



Default value: `30`

### <a name="openvpnclient"></a>`openvpn::client`

This define creates client certs for a specified server as well as a tarball that can be directly imported into clients

#### Examples

##### 

```puppet
openvpn::client {
  'my_user':
    server      => 'contractors',
    remote_host => 'vpn.mycompany.com'
 }
```

#### Parameters

The following parameters are available in the `openvpn::client` defined type:

* [`server`](#server)
* [`compression`](#compression)
* [`dev`](#dev)
* [`mute`](#mute)
* [`mute_replay_warnings`](#mute_replay_warnings)
* [`nobind`](#nobind)
* [`persist_key`](#persist_key)
* [`persist_tun`](#persist_tun)
* [`port`](#port)
* [`proto`](#proto)
* [`remote_host`](#remote_host)
* [`cipher`](#cipher)
* [`tls_cipher`](#tls_cipher)
* [`data_ciphers`](#data_ciphers)
* [`data_ciphers_fallback`](#data_ciphers_fallback)
* [`resolv_retry`](#resolv_retry)
* [`auth_retry`](#auth_retry)
* [`verb`](#verb)
* [`pam`](#pam)
* [`authuserpass`](#authuserpass)
* [`tls_auth`](#tls_auth)
* [`tls_crypt`](#tls_crypt)
* [`x509_name`](#x509_name)
* [`setenv`](#setenv)
* [`setenv_safe`](#setenv_safe)
* [`up`](#up)
* [`down`](#down)
* [`sndbuf`](#sndbuf)
* [`rcvbuf`](#rcvbuf)
* [`shared_ca`](#shared_ca)
* [`custom_options`](#custom_options)
* [`expire`](#expire)
* [`readme`](#readme)
* [`pull`](#pull)
* [`server_extca_enabled`](#server_extca_enabled)
* [`remote_cert_tls`](#remote_cert_tls)

##### <a name="server"></a>`server`

Data type: `String`

Name of the corresponding openvpn endpoint

##### <a name="compression"></a>`compression`

Data type: `Optional[String[1]]`

Which compression algorithm to use. This parameter is deprecated in OpenVPN 2.5.

Default value: ``undef``

##### <a name="dev"></a>`dev`

Data type: `Enum['tap', 'tun']`

Device method

Default value: `'tun'`

##### <a name="mute"></a>`mute`

Data type: `Integer`

Set log mute level

Default value: `20`

##### <a name="mute_replay_warnings"></a>`mute_replay_warnings`

Data type: `Boolean`

Silence duplicate packet warnings (common on wireless networks)

Default value: ``true``

##### <a name="nobind"></a>`nobind`

Data type: `Boolean`

Whether or not to bind to a specific port number

Default value: ``true``

##### <a name="persist_key"></a>`persist_key`

Data type: `Boolean`

Try to retain access to resources that may be unavailable because of privilege downgrades

Default value: ``true``

##### <a name="persist_tun"></a>`persist_tun`

Data type: `Boolean`

Try to retain access to resources that may be unavailable because of privilege downgrades

Default value: ``true``

##### <a name="port"></a>`port`

Data type: `String`

The port the openvpn server service is running on

Default value: `'1194'`

##### <a name="proto"></a>`proto`

Data type: `Enum['tcp','udp']`

What IP protocol is being used.

Default value: `'tcp'`

##### <a name="remote_host"></a>`remote_host`

Data type: `Variant[String, Array[String]]`

The IP or hostname of the openvpn server service.

Default value: `$facts['networking']['fqdn']`

##### <a name="cipher"></a>`cipher`

Data type: `String`

Cipher to use for packet encryption

Default value: `'AES-256-GCM'`

##### <a name="tls_cipher"></a>`tls_cipher`

Data type: `String`

TLS Ciphers to use

Default value: `'TLS-DHE-RSA-WITH-AES-256-GCM-SHA384:TLS-DHE-RSA-WITH-AES-256-CBC-SHA256:TLS-DHE-RSA-WITH-AES-128-GCM-SHA256:TLS-DHE-RSA-WITH-AES-128-CBC-SHA256'`

##### <a name="data_ciphers"></a>`data_ciphers`

Data type: `String`

Ciphers to allow for packet encryption

Default value: `'AES-256-GCM:AES-128-GCM'`

##### <a name="data_ciphers_fallback"></a>`data_ciphers_fallback`

Data type: `String`

Cipher that is used to fall back to if OpenVPN cannot determine which cipher the peer is willing to use.

Default value: ``undef``

##### <a name="resolv_retry"></a>`resolv_retry`

Data type: `String`

How many seconds should the openvpn client try to resolve the server's hostname

Default value: `'infinite'`

##### <a name="auth_retry"></a>`auth_retry`

Data type: `Enum['none', 'nointeract', 'interact']`

Controls how OpenVPN responds to username/password verification errors such as the client-side response to an AUTH_FAILED message from the server or verification failure of the private key password.

Default value: `'none'`

##### <a name="verb"></a>`verb`

Data type: `String`

Level of logging verbosity

Default value: `'3'`

##### <a name="pam"></a>`pam`

Data type: `Boolean`

DEPRECATED: Boolean, Enable/Disable.

Default value: ``false``

##### <a name="authuserpass"></a>`authuserpass`

Data type: `Boolean`

Set if username and password required

Default value: ``false``

##### <a name="tls_auth"></a>`tls_auth`

Data type: `Boolean`

Activates tls-auth to Add an additional layer of HMAC authentication on top of the TLS control channel to protect against DoS attacks. This has to be set to the same value as on the Server

Default value: ``false``

##### <a name="tls_crypt"></a>`tls_crypt`

Data type: `Boolean`

Encrypt and authenticate all control channel packets with the key from keyfile. (See --tls-auth for more background.)

Default value: ``false``

##### <a name="x509_name"></a>`x509_name`

Data type: `Optional[String]`

Common name of openvpn server to make an x509-name verification

Default value: ``undef``

##### <a name="setenv"></a>`setenv`

Data type: `Hash`

Set a custom environmental variable name=value to pass to script.

Default value: `{}`

##### <a name="setenv_safe"></a>`setenv_safe`

Data type: `Hash`

Set a custom environmental variable OPENVPN_name=value to pass to script. This directive is designed to be pushed by the server to clients, and the prepending of "OPENVPN_" to the environmental variable is a safety precaution to prevent a LD_PRELOAD style attack from a malicious or compromised server.

Default value: `{}`

##### <a name="up"></a>`up`

Data type: `Optional[String[1]]`

Script which we want to run when openvpn client is connecting

Default value: ``undef``

##### <a name="down"></a>`down`

Data type: `Optional[String[1]]`

Script which we want to run when openvpn client is disconneting

Default value: ``undef``

##### <a name="sndbuf"></a>`sndbuf`

Data type: `Optional[Integer]`

Set the TCP/UDP socket send buffer size.

Default value: ``undef``

##### <a name="rcvbuf"></a>`rcvbuf`

Data type: `Optional[Integer]`

Set the TCP/UDP socket receive buffer size.

Default value: ``undef``

##### <a name="shared_ca"></a>`shared_ca`

Data type: `Optional[String]`

The name of an openssl::ca resource to use.

Default value: ``undef``

##### <a name="custom_options"></a>`custom_options`

Data type: `Hash`

Hash of additional options that you want to append to the configuration file.

Default value: `{}`

##### <a name="expire"></a>`expire`

Data type: `Optional[Integer]`

Set a custom expiry time to pass to script. Value is the number of days the certificate is valid for.

Default value: ``undef``

##### <a name="readme"></a>`readme`

Data type: `Optional[String]`

Text to place in a README file which is included in download-configs archive.

Default value: ``undef``

##### <a name="pull"></a>`pull`

Data type: `Boolean`

Allow server to push options like dns or routes

Default value: ``false``

##### <a name="server_extca_enabled"></a>`server_extca_enabled`

Data type: `Boolean`

Turn this on if you are using an external CA solution, like FreeIPA. Use this in Combination with exported_ressourced, since they don't have Access to the Serverconfig

Default value: ``false``

##### <a name="remote_cert_tls"></a>`remote_cert_tls`

Data type: `Boolean`

Enable or disable use of remote-cert-tls used with client configuration

Default value: ``true``

### <a name="openvpnclient_specific_config"></a>`openvpn::client_specific_config`

This feature is explained here: http://openvpn.net/index.php/open-source/documentation/howto.html#policy
All the parameters are explained in the openvpn documentation http://openvpn.net/index.php/open-source/documentation/howto.html#policy

#### Examples

##### 

```puppet
openvpn::client_specific_config {
  'vpn_client':
    server       => 'contractors',
    iroute       => ['10.0.1.0 255.255.255.0'],
    ifconfig     => '10.10.10.1 10.10.10.2',
    dhcp_options => ['DNS 8.8.8.8']
 }
```

#### Parameters

The following parameters are available in the `openvpn::client_specific_config` defined type:

* [`server`](#server)
* [`iroute`](#iroute)
* [`iroute_ipv6`](#iroute_ipv6)
* [`route`](#route)
* [`ifconfig`](#ifconfig)
* [`ifconfig_ipv6`](#ifconfig_ipv6)
* [`dhcp_options`](#dhcp_options)
* [`redirect_gateway`](#redirect_gateway)
* [`custom_options`](#custom_options)
* [`ensure`](#ensure)
* [`manage_client_configs`](#manage_client_configs)

##### <a name="server"></a>`server`

Data type: `String[1]`

Name of the corresponding openvpn endpoint

##### <a name="iroute"></a>`iroute`

Data type: `Array[String[1]]`

Array of iroute combinations.

Default value: `[]`

##### <a name="iroute_ipv6"></a>`iroute_ipv6`

Data type: `Array[String[1]]`

Array of IPv6 iroute combinations.

Default value: `[]`

##### <a name="route"></a>`route`

Data type: `Array[String[1]]`

Array of route combinations pushed to client.

Default value: `[]`

##### <a name="ifconfig"></a>`ifconfig`

Data type: `Optional[String[1]]`

IP configuration to push to the client.

Default value: ``undef``

##### <a name="ifconfig_ipv6"></a>`ifconfig_ipv6`

Data type: `Optional[String[1]]`

IPv6 configuration to push to the client.

Default value: ``undef``

##### <a name="dhcp_options"></a>`dhcp_options`

Data type: `Array[String[1]]`

DHCP options to push to the client.

Default value: `[]`

##### <a name="redirect_gateway"></a>`redirect_gateway`

Data type: `Boolean`

Redirect all traffic to gateway

Default value: ``false``

##### <a name="custom_options"></a>`custom_options`

Data type: `Hash`

Hash of additional options to append to the configuration file.

Default value: `{}`

##### <a name="ensure"></a>`ensure`

Data type: `Enum['present', 'absent']`

Sets the client specific configuration file status (present or absent)

Default value: `present`

##### <a name="manage_client_configs"></a>`manage_client_configs`

Data type: `Boolean`

Manage dependencies on Openvpn::Client ressources

Default value: ``true``

### <a name="openvpnrevoke"></a>`openvpn::revoke`

This define creates a revocation on a certificate for a specified server.

#### Examples

##### 

```puppet
openvpn::client {
  'my_user':
    server      => 'contractors'
}
```

##### 

```puppet
openvpn::revoke {
  'my_user':
    server      => 'contractors'
 }
```

#### Parameters

The following parameters are available in the `openvpn::revoke` defined type:

* [`server`](#server)

##### <a name="server"></a>`server`

Data type: `String`

Name of the corresponding openvpn endpoint

### <a name="openvpnserver"></a>`openvpn::server`

This define creates the openvpn server instance which can run in server or client mode.

#### Examples

##### install

```puppet
openvpn::server { 'winterthur':
    country      => 'CH',
    province     => 'ZH',
    city         => 'Winterthur',
    organization => 'example.org',
    email        => 'root@example.org',
    server       => '10.200.200.0 255.255.255.0',
}
```

##### a server in client mode

```puppet
file {
  '/etc/openvpn/zurich/keys/ca.crt':
    source => 'puppet:///path/to/ca.crt';
  '/etc/openvpn/zurich/keys/zurich.crt':
    source => 'puppet:///path/to/zurich.crt';
  '/etc/openvpn/zurich/keys/zurich.key':
    source => 'puppet:///path/to/zurich.key';
}
openvpn::server { 'zurich':
  remote  => [ 'mgmtnet3.nine.ch 1197', 'mgmtnet2.nine.ch 1197' ],
  require => [ File['/etc/openvpn/zurich/keys/ca.crt'],
               File['/etc/openvpn/zurich/keys/zurich.crt'],
               File['/etc/openvpn/zurich/keys/zurich.key'] ];
}
```

#### Parameters

The following parameters are available in the `openvpn::server` defined type:

* [`dn_mode`](#dn_mode)
* [`country`](#country)
* [`province`](#province)
* [`city`](#city)
* [`organization`](#organization)
* [`email`](#email)
* [`remote`](#remote)
* [`remote_random_hostname`](#remote_random_hostname)
* [`remote_random`](#remote_random)
* [`common_name`](#common_name)
* [`compression`](#compression)
* [`dev`](#dev)
* [`user`](#user)
* [`group`](#group)
* [`ipp`](#ipp)
* [`duplicate_cn`](#duplicate_cn)
* [`local`](#local)
* [`logfile`](#logfile)
* [`manage_logfile_directory`](#manage_logfile_directory)
* [`logdirectory_user`](#logdirectory_user)
* [`logdirectory_group`](#logdirectory_group)
* [`port`](#port)
* [`portshare`](#portshare)
* [`proto`](#proto)
* [`status_log`](#status_log)
* [`status_version`](#status_version)
* [`server`](#server)
* [`server_ipv6`](#server_ipv6)
* [`server_bridge`](#server_bridge)
* [`push`](#push)
* [`route`](#route)
* [`route_ipv6`](#route_ipv6)
* [`keepalive`](#keepalive)
* [`ssl_key_algo`](#ssl_key_algo)
* [`ssl_key_size`](#ssl_key_size)
* [`ssl_key_curve`](#ssl_key_curve)
* [`ecdh_curve`](#ecdh_curve)
* [`topology`](#topology)
* [`c2c`](#c2c)
* [`tcp_nodelay`](#tcp_nodelay)
* [`ccd_exclusive`](#ccd_exclusive)
* [`pam`](#pam)
* [`pam_module_arguments`](#pam_module_arguments)
* [`management`](#management)
* [`management_ip`](#management_ip)
* [`management_port`](#management_port)
* [`up`](#up)
* [`down`](#down)
* [`client_connect`](#client_connect)
* [`client_disconnect`](#client_disconnect)
* [`username_as_common_name`](#username_as_common_name)
* [`client_cert_not_required`](#client_cert_not_required)
* [`ldap_enabled`](#ldap_enabled)
* [`ldap_server`](#ldap_server)
* [`ldap_binddn`](#ldap_binddn)
* [`ldap_bindpass`](#ldap_bindpass)
* [`ldap_u_basedn`](#ldap_u_basedn)
* [`ldap_u_filter`](#ldap_u_filter)
* [`ldap_g_basedn`](#ldap_g_basedn)
* [`ldap_gmember`](#ldap_gmember)
* [`ldap_g_filter`](#ldap_g_filter)
* [`ldap_memberatr`](#ldap_memberatr)
* [`ldap_tls_enable`](#ldap_tls_enable)
* [`ldap_tls_ca_cert_file`](#ldap_tls_ca_cert_file)
* [`ldap_tls_ca_cert_dir`](#ldap_tls_ca_cert_dir)
* [`ldap_tls_client_cert_file`](#ldap_tls_client_cert_file)
* [`ldap_tls_client_key_file`](#ldap_tls_client_key_file)
* [`verb`](#verb)
* [`cipher`](#cipher)
* [`tls_cipher`](#tls_cipher)
* [`data_ciphers`](#data_ciphers)
* [`data_ciphers_fallback`](#data_ciphers_fallback)
* [`persist_key`](#persist_key)
* [`persist_tun`](#persist_tun)
* [`key_expire`](#key_expire)
* [`crl_days`](#crl_days)
* [`digest`](#digest)
* [`ca_expire`](#ca_expire)
* [`key_name`](#key_name)
* [`key_ou`](#key_ou)
* [`key_cn`](#key_cn)
* [`tls_auth`](#tls_auth)
* [`tls_crypt`](#tls_crypt)
* [`tls_server`](#tls_server)
* [`tls_client`](#tls_client)
* [`server_poll_timeout`](#server_poll_timeout)
* [`ping_timer_rem`](#ping_timer_rem)
* [`sndbuf`](#sndbuf)
* [`rcvbuf`](#rcvbuf)
* [`shared_ca`](#shared_ca)
* [`crl_verify`](#crl_verify)
* [`crl_auto_renew`](#crl_auto_renew)
* [`crl_renew_schedule_period`](#crl_renew_schedule_period)
* [`crl_renew_schedule_repeat`](#crl_renew_schedule_repeat)
* [`extca_enabled`](#extca_enabled)
* [`extca_ca_cert_file`](#extca_ca_cert_file)
* [`extca_ca_crl_file`](#extca_ca_crl_file)
* [`extca_server_cert_file`](#extca_server_cert_file)
* [`extca_server_key_file`](#extca_server_key_file)
* [`extca_dh_file`](#extca_dh_file)
* [`extca_tls_auth_key_file`](#extca_tls_auth_key_file)
* [`autostart`](#autostart)
* [`remote_cert_tls`](#remote_cert_tls)
* [`nobind`](#nobind)
* [`secret`](#secret)
* [`scripts`](#scripts)
* [`custom_options`](#custom_options)
* [`fragment`](#fragment)

##### <a name="dn_mode"></a>`dn_mode`

Data type: `Enum['org','cn_only']`

EasyRSA X509 DN mode.

Default value: `'org'`

##### <a name="country"></a>`country`

Data type: `Optional[String[1]]`

Country to be used for the SSL certificate, mandatory for server mode.

Default value: ``undef``

##### <a name="province"></a>`province`

Data type: `Optional[String[1]]`

Province to be used for the SSL certificate, mandatory for server mode.

Default value: ``undef``

##### <a name="city"></a>`city`

Data type: `Optional[String[1]]`

City to be used for the SSL certificate, mandatory for server mode.

Default value: ``undef``

##### <a name="organization"></a>`organization`

Data type: `Optional[String[1]]`

Organization to be used for the SSL certificate, mandatory for server mode.

Default value: ``undef``

##### <a name="email"></a>`email`

Data type: `Optional[String[1]]`

Email address to be used for the SSL certificate, mandatory for server mode.

Default value: ``undef``

##### <a name="remote"></a>`remote`

Data type: `Optional[Array]`

List of OpenVPN endpoints to connect to.

Default value: ``undef``

##### <a name="remote_random_hostname"></a>`remote_random_hostname`

Data type: `Boolean`

OpenVPN will prepend a random string (6 bytes, 12 hex characters) to hostname to prevent DNS caching. For example, "foo.example.com" would be modified to "<random-chars>.foo.example.com".

Default value: ``false``

##### <a name="remote_random"></a>`remote_random`

Data type: `Boolean`

When multiple ${remote} address/ports are specified, initially randomize the order of the list as a kind of basic load-balancing measure.

Default value: ``false``

##### <a name="common_name"></a>`common_name`

Data type: `String`

Common name to be used for the SSL certificate

Default value: `'server'`

##### <a name="compression"></a>`compression`

Data type: `Optional[String[1]]`

Which compression algorithm to use. This parameter is deprecated in OpenVPN 2.5.

Default value: ``undef``

##### <a name="dev"></a>`dev`

Data type: `String`

TUN/TAP virtual network device

Default value: `'tun0'`

##### <a name="user"></a>`user`

Data type: `String`

Group to drop privileges to after startup

Default value: `'nobody'`

##### <a name="group"></a>`group`

Data type: `Optional[String]`

User to drop privileges to after startup

Default value: ``undef``

##### <a name="ipp"></a>`ipp`

Data type: `Boolean`

Persist ifconfig information to a file to retain client IP addresses between sessions

Default value: ``false``

##### <a name="duplicate_cn"></a>`duplicate_cn`

Data type: `Boolean`

Allow multiple connections on one cn

Default value: ``false``

##### <a name="local"></a>`local`

Data type: `String`

Interface for openvpn to bind to.

Default value: `$facts['networking']['ip']`

##### <a name="logfile"></a>`logfile`

Data type: `Variant[Boolean, String]`

Logfile for this openvpn server

Default value: ``false``

##### <a name="manage_logfile_directory"></a>`manage_logfile_directory`

Data type: `Boolean`

Manage the directory that the logfile is located in

Default value: ``false``

##### <a name="logdirectory_user"></a>`logdirectory_user`

Data type: `String[1]`

The owner user of the logfile directory

Default value: `'nobody'`

##### <a name="logdirectory_group"></a>`logdirectory_group`

Data type: `String[1]`

The owner group of the logfile directory

Default value: `'nobody'`

##### <a name="port"></a>`port`

Data type: `String`

The port the openvpn server service is running on#

Default value: `'1194'`

##### <a name="portshare"></a>`portshare`

Data type: `Optional[String]`

The address and port to which non openvpn request shall be forwared, e.g. 127.0.0.1 8443

Default value: ``undef``

##### <a name="proto"></a>`proto`

Data type: `Enum['tcp', 'tcp4', 'tcp6', 'udp', 'udp4', 'udp6']`

What IP protocol is being used.

Default value: `'tcp'`

##### <a name="status_log"></a>`status_log`

Data type: `String`

Logfile for periodic dumps of the vpn service status

Default value: `"/var/log/openvpn/${name}-status.log"`

##### <a name="status_version"></a>`status_version`

Data type: `Enum['1', '2', '3', '']`

Choose the status file format version number.

Default value: `''`

##### <a name="server"></a>`server`

Data type: `Optional[String[1]]`

Network to assign client addresses out of. Required in tun mode, not in tap mode

Default value: ``undef``

##### <a name="server_ipv6"></a>`server_ipv6`

Data type: `Optional[String[1]]`

IPv6 network to assign client addresses out of

Default value: ``undef``

##### <a name="server_bridge"></a>`server_bridge`

Data type: `Optional[String[1]]`

Server configuration to comply with existing DHCP server

Default value: ``undef``

##### <a name="push"></a>`push`

Data type: `Array`

Options to push out to the client. This can include routes, DNS servers, DNS search domains, and many other options.

Default value: `[]`

##### <a name="route"></a>`route`

Data type: `Array`

Add route to routing table after connection is established. Multiple routes can be specified.

Default value: `[]`

##### <a name="route_ipv6"></a>`route_ipv6`

Data type: `Array`

Add IPv6 route to routing table after connection is established. Multiple routes can be specified.

Default value: `[]`

##### <a name="keepalive"></a>`keepalive`

Data type: `Optional[String[1]]`

Add keepalive directive (ping and ping-restart) to server. Should match the form "n m".

Default value: ``undef``

##### <a name="ssl_key_algo"></a>`ssl_key_algo`

Data type: `Enum['rsa', 'ec', 'ed']`

SSL Key Algo. ec can enable elliptic curve support. ed uses ed25519 keys

Default value: `'rsa'`

##### <a name="ssl_key_size"></a>`ssl_key_size`

Data type: `Integer`

Length of SSL keys (in bits) generated by this module, used if ssl_key_algo is rsa

Default value: `2048`

##### <a name="ssl_key_curve"></a>`ssl_key_curve`

Data type: `String`

Define the named curve for the ssl keys, used if ssl_key_algo is ec, ed

Default value: `'secp384r1'`

##### <a name="ecdh_curve"></a>`ecdh_curve`

Data type: `Optional[String[1]]`

Define the named curve for ECDH key exchange, used if ssl_key_algo is ec, ed

Default value: ``undef``

##### <a name="topology"></a>`topology`

Data type: `String`

Define the network topology type

Default value: `'net30'`

##### <a name="c2c"></a>`c2c`

Data type: `Boolean`

Enable client to client visibility

Default value: ``false``

##### <a name="tcp_nodelay"></a>`tcp_nodelay`

Data type: `Boolean`

Enable/Disable.

Default value: ``false``

##### <a name="ccd_exclusive"></a>`ccd_exclusive`

Data type: `Boolean`

Enable/Disable.

Default value: ``false``

##### <a name="pam"></a>`pam`

Data type: `Boolean`

Enable/Disable.

Default value: ``false``

##### <a name="pam_module_arguments"></a>`pam_module_arguments`

Data type: `String`

Arguments to pass to the PAM module. For FreeIPA, set this to "openvpn login USERNAME password PASSWORD" and create HBAC Service "openvpn".

Default value: `'login'`

##### <a name="management"></a>`management`

Data type: `Boolean`

Enable management interface

Default value: ``false``

##### <a name="management_ip"></a>`management_ip`

Data type: `String`

IP address where the management interface will listen

Default value: `'localhost'`

##### <a name="management_port"></a>`management_port`

Data type: `Variant[Stdlib::Port::Unprivileged,Enum['unix']]`

Port where the management interface will listen

Default value: `7505`

##### <a name="up"></a>`up`

Data type: `Optional[String[1]]`

Script which we want to run when openvpn server starts. If the path to the scirpt does not contain a slash, it will be assumed to be in `openvpn/${name}/scripts` directory.

Default value: ``undef``

##### <a name="down"></a>`down`

Data type: `Optional[String[1]]`

Script which we want to run when openvpn server stops. If the path to the scirpt does not contain a slash, it will be assumed to be in `openvpn/${name}/scripts` directory.

Default value: ``undef``

##### <a name="client_connect"></a>`client_connect`

Data type: `Optional[String[1]]`

Script which we want to run when a client connects. If the path to the scirpt does not contain a slash, it will be assumed to be in `openvpn/${name}/scripts` directory.

Default value: ``undef``

##### <a name="client_disconnect"></a>`client_disconnect`

Data type: `Optional[String[1]]`

Script which we want to run when a client disconnects. If the path to the scirpt does not contain a slash, it will be assumed to be in `openvpn/${name}/scripts` directory.

Default value: ``undef``

##### <a name="username_as_common_name"></a>`username_as_common_name`

Data type: `Boolean`

If true then set username-as-common-name

Default value: ``false``

##### <a name="client_cert_not_required"></a>`client_cert_not_required`

Data type: `Boolean`

If true then set client-cert-not-required

Default value: ``false``

##### <a name="ldap_enabled"></a>`ldap_enabled`

Data type: `Boolean`

If ldap is enabled, do stuff

Default value: ``false``

##### <a name="ldap_server"></a>`ldap_server`

Data type: `Optional[String[1]]`

URL of LDAP server. ie. ldap://URL:PORT

Default value: ``undef``

##### <a name="ldap_binddn"></a>`ldap_binddn`

Data type: `Optional[String[1]]`

LDAP DN to bind as#

Default value: ``undef``

##### <a name="ldap_bindpass"></a>`ldap_bindpass`

Data type: `Optional[String[1]]`

LDAP password for ldapbinddn

Default value: ``undef``

##### <a name="ldap_u_basedn"></a>`ldap_u_basedn`

Data type: `Optional[String[1]]`

Place in the LDAP tree to look for users

Default value: ``undef``

##### <a name="ldap_u_filter"></a>`ldap_u_filter`

Data type: `Optional[String[1]]`

User SearchFilter for LDAP accounts

Default value: ``undef``

##### <a name="ldap_g_basedn"></a>`ldap_g_basedn`

Data type: `Optional[String[1]]`

Place in the LDAP tree to look for groups

Default value: ``undef``

##### <a name="ldap_gmember"></a>`ldap_gmember`

Data type: `Boolean`

If defined use group block in ldap.conf

Default value: ``false``

##### <a name="ldap_g_filter"></a>`ldap_g_filter`

Data type: `Optional[String[1]]`

Group SearchFilter for LDAP accounts

Default value: ``undef``

##### <a name="ldap_memberatr"></a>`ldap_memberatr`

Data type: `Optional[String[1]]`

Attribute for MemberAttribute. Used with ldapfilter

Default value: ``undef``

##### <a name="ldap_tls_enable"></a>`ldap_tls_enable`

Data type: `Boolean`

Enable TLS for the LDAP authentication

Default value: ``false``

##### <a name="ldap_tls_ca_cert_file"></a>`ldap_tls_ca_cert_file`

Data type: `Optional[String[1]]`

LDAP TLS authentication: path to the CA certificate.

Default value: ``undef``

##### <a name="ldap_tls_ca_cert_dir"></a>`ldap_tls_ca_cert_dir`

Data type: `Optional[String[1]]`

LDAP TLS authentication: path to the CA certificates.

Default value: ``undef``

##### <a name="ldap_tls_client_cert_file"></a>`ldap_tls_client_cert_file`

Data type: `Optional[Stdlib::Absolutepath]`

LDAP TLS authentication: path to the tls client certificate

Default value: ``undef``

##### <a name="ldap_tls_client_key_file"></a>`ldap_tls_client_key_file`

Data type: `Optional[Stdlib::Absolutepath]`

LDAP TLS authentication: path to the tls client key

Default value: ``undef``

##### <a name="verb"></a>`verb`

Data type: `Optional[String]`

Level of logging verbosity

Default value: ``undef``

##### <a name="cipher"></a>`cipher`

Data type: `String`

Cipher to use for packet encryption

Default value: `'AES-256-GCM'`

##### <a name="tls_cipher"></a>`tls_cipher`

Data type: `String`

TLS Ciphers to use

Default value: `'TLS-DHE-RSA-WITH-AES-256-GCM-SHA384:TLS-DHE-RSA-WITH-AES-256-CBC-SHA256:TLS-DHE-RSA-WITH-AES-128-GCM-SHA256:TLS-DHE-RSA-WITH-AES-128-CBC-SHA256'`

##### <a name="persist_key"></a>`persist_key`

Data type: `Boolean`

Try to retain access to resources that may be unavailable because of privilege downgrades

Default value: ``false``

##### <a name="persist_tun"></a>`persist_tun`

Data type: `Boolean`

Try to retain access to resources that may be unavailable because of privilege downgrades

Default value: ``false``

##### <a name="key_expire"></a>`key_expire`

Data type: `Integer`

The number of days to certify the server certificate for

Default value: `3650`

##### <a name="crl_days"></a>`crl_days`

Data type: `Integer[1]`

The number of days the client revocation list will be valid for after generating

Default value: `30`

##### <a name="digest"></a>`digest`

Data type: `Enum['md5','sha1','sha256','sha224','sha384','sha512']`

Cryptographic digest to use

Default value: `'sha512'`

##### <a name="ca_expire"></a>`ca_expire`

Data type: `Integer`

The number of days to certify the CA certificate for

Default value: `3650`

##### <a name="key_name"></a>`key_name`

Data type: `Optional[String]`

Value for name_default variable in openssl.cnf and  KEY_NAME in vars

Default value: ``undef``

##### <a name="key_ou"></a>`key_ou`

Data type: `Optional[String]`

Value for organizationalUnitName_default variable in openssl.cnf and KEY_OU in vars

Default value: ``undef``

##### <a name="key_cn"></a>`key_cn`

Data type: `Optional[String]`

Value for commonName_default variable in openssl.cnf and KEY_CN in vars

Default value: ``undef``

##### <a name="tls_auth"></a>`tls_auth`

Data type: `Boolean`

Activates tls-auth to Add an additional layer of HMAC authentication on top of the TLS control channel to protect against DoS attacks.

Default value: ``false``

##### <a name="tls_crypt"></a>`tls_crypt`

Data type: `Boolean`

Encrypt and authenticate all control channel packets with the key from keyfile. (See --tls-auth for more background.)

Default value: ``false``

##### <a name="tls_server"></a>`tls_server`

Data type: `Boolean`

If proto not tcp it lets you choose if the parameter tls-server is set or not.

Default value: ``false``

##### <a name="tls_client"></a>`tls_client`

Data type: `Boolean`

Allows you to set this server up as a tls-client connection.

Default value: ``false``

##### <a name="server_poll_timeout"></a>`server_poll_timeout`

Data type: `Optional[Integer]`

Value for timeout before trying the next server.

Default value: ``undef``

##### <a name="ping_timer_rem"></a>`ping_timer_rem`

Data type: `Boolean`

Do not start clocking timeouts until a remote peer connects.

Default value: ``false``

##### <a name="sndbuf"></a>`sndbuf`

Data type: `Optional[Integer]`

Set the TCP/UDP socket send buffer size.

Default value: ``undef``

##### <a name="rcvbuf"></a>`rcvbuf`

Data type: `Optional[Integer]`

Set the TCP/UDP socket receive buffer size.

Default value: ``undef``

##### <a name="shared_ca"></a>`shared_ca`

Data type: `Optional[String]`

Name of a openssl::ca resource to use config with

Default value: ``undef``

##### <a name="crl_verify"></a>`crl_verify`

Data type: `Boolean`

Enable CRL checking. Disabling this is not recommended.

Default value: ``true``

##### <a name="crl_auto_renew"></a>`crl_auto_renew`

Data type: `Boolean`

Enables automatic renewing of crl.pem.

Default value: ``false``

##### <a name="crl_renew_schedule_period"></a>`crl_renew_schedule_period`

Data type: `String`

Sets the "period" Parameter of the schedule for renewing the CRL. Since changing the expiry of 30 days is not possible with easy-rsa2, twice a month should be good

Default value: `'monthly'`

##### <a name="crl_renew_schedule_repeat"></a>`crl_renew_schedule_repeat`

Data type: `Integer`

Sets the "repeat" Parameter of the schedule for renewing the CRL. Since changing the expiry of 30 days is not possible with easy-rsa2, twice a month should be good

Default value: `2`

##### <a name="extca_enabled"></a>`extca_enabled`

Data type: `Boolean`

Turn this on if you are using an external CA solution, like FreeIPA. Once enabled, you must configure the remaining extca_* parameters.

Default value: ``false``

##### <a name="extca_ca_cert_file"></a>`extca_ca_cert_file`

Data type: `Optional[String]`

External CA: Path to the CA certificate.

Default value: ``undef``

##### <a name="extca_ca_crl_file"></a>`extca_ca_crl_file`

Data type: `Optional[String]`

External CA: Path to the CA's CRL file. For FreeIPA-based CAs, CRLs expire every four hours, which means you may need your own solution for maintaining a local copy of your CA's CRL. Otherwise, you can set crl_verify to false (not recommended).

Default value: ``undef``

##### <a name="extca_server_cert_file"></a>`extca_server_cert_file`

Data type: `Optional[String]`

External CA: Path to the external CA issued OpenVPN server certificate.

Default value: ``undef``

##### <a name="extca_server_key_file"></a>`extca_server_key_file`

Data type: `Optional[String]`

External CA: Path to the key file that corresponds to $extca_server_cert_file

Default value: ``undef``

##### <a name="extca_dh_file"></a>`extca_dh_file`

Data type: `Optional[String]`

External CA: Path to your Dillie-Hellman parameter file. You will need to create one yourself. Make sure key-size matches the public key size of your CA-issued server certificate. Like this: openssl dhparam -out /path/to/dh.pem 2048 Note: This is only required if you are enabling $tls_server.

Default value: ``undef``

##### <a name="extca_tls_auth_key_file"></a>`extca_tls_auth_key_file`

Data type: `Optional[String]`

External CA: If you are enabling $extca_enabled and $tls_auth, you will also need to create  the tls-auth key file and specify its location here. The file can be created like this: openvpn --genkey --secret /path/to/ta.key. Note: you will need to distribute this file to your clients as well.

Default value: ``undef``

##### <a name="autostart"></a>`autostart`

Data type: `Optional[Boolean]`

Enable autostart for server if openvpn::autostart_all is false.

Default value: ``undef``

##### <a name="remote_cert_tls"></a>`remote_cert_tls`

Data type: `Boolean`

Enable or disable use of remote-cert-tls for the session. Generally used with client configuration

Default value: ``true``

##### <a name="nobind"></a>`nobind`

Data type: `Boolean`

Whether or not to bind to a specific port number.#

Default value: ``false``

##### <a name="secret"></a>`secret`

Data type: `Optional[String]`

A pre-shared static key.

Default value: ``undef``

##### <a name="scripts"></a>`scripts`

Data type: `Hash[String, Hash]`

Hash of scripts to copy with this instance.
For example, to put a script in `/etc/openvpn/test-site/scripts/add-tap-to-bridge.sh` and use it as an `up` script
``` puppet
openvpn::server { 'test-site':
  ....
  up => 'add-tap-to-bridge.sh',
  scripts => {
    "add-tap-to-bridge.sh" => {
      source => 'puppet:///path/to/add-tap-to-bridge.sh',
    },
  },
}
```

Default value: `{}`

##### <a name="custom_options"></a>`custom_options`

Data type: `Hash`

Hash of additional options to append to the configuration file.

Default value: `{}`

##### <a name="fragment"></a>`fragment`

Data type: `Variant[Boolean, Integer]`



Default value: ``false``

